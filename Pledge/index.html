<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="content-language" content="en-EN" />

    <title>Pledge</title>

    <!-- INCLUDE JEELIZ FACEFILTER SCRIPT -->
    <script src="./dist/jeelizFaceFilter.js"></script>

    <!-- INCLUDE A MODIFIED VERSION OF AFRAME -->
    <!-- SEARCH FOR "JEELIZ" COMMENT TO SEE THE MODIFS -->
    <script src="./libs/aFrame/aframe-v0.8.2_modified.js">
      <script src="https://aframe.io/releases/0.9.2/aframe.min.js">
    </script>

    <style>
      body {
        font-family: Helvetica Neu, Arial, sans-serif;
      }
      
    </style>

    <script>
      AFRAME.registerComponent("animate-png", {
        init: function() {
          // load the .pngs
          let loader = new THREE.TextureLoader();
          this.pngArray = [];
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F1.png?v=1614244671790"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F2.png?v=1614244671790"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F3.png?v=1614244675853"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F4.png?v=1614244679903"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F5.png?v=1614244685465"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F6.png?v=1614244688442"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F7.png?v=1614244695272"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F8.png?v=1614244700393"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F9.png?v=1614244703888"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F10.png?v=1614244707358"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F11.png?v=1614244718755"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F12.1.png?v=1614244730770"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F12.2.png?v=1614244733597"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F13.png?v=1614244950867"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F14.png?v=1614245177288"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F15.1.png?v=1614245177288"
            )
          );
          
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F15.2.png?v=1614245181543"
            )
          );
           this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F16.1.png?v=1614245185924"
            )
          );
           this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F16.2.png?v=1614245190400"
            )
          );
           this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F17.1.png?v=1614245196728"
            )
          );
           this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F17.2.png?v=1614245205004"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F18.png?v=1614245209029"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F19.png?v=1614245917924"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F20.png?v=1614245919202"
            )
          );
          this.pngArray.push(
            loader.load(
              "https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2F21.png?v=1614245924040"
            )
          );
          
          

          this.el.addEventListener("loaded", e => {
            let mesh = this.el.getObject3D("mesh");
            this.material = mesh.material;

            var i = 0;
            this.id = setInterval(e => {
              if (i >= this.pngArray.length);
              this.material.map = this.pngArray[i++];
              this.material.needsUpdate = true;
            }, 4000);
          });
        },
        remove: function() {
          clearInterval(this.id);
          // free the memory
          for (let i = 0; i < this.pngArray.length; i++) {
            this.pngArray[i].dispose();
          }
        }
        //entity.emit('animate-png', null, true);
      });
    </script>

    <!-- INCLUDE DEMO SCRIPT -->
    <script src="./main.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>s

    <!-- INCLUDE FORK ME ON GITHUB BANNER -->
    <!script src="./appearance/widget.js">
    <!/script>
    <link
        rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      />
And 
    <!link rel="stylesheet" href="./appearance/style.css" type="text/css" />
  </head>

  <body onload="main()">
    <canvas width="120" height="180" id="jeeFaceFilterCanvas"></canvas>
    <canvas width="600" height="600" id="frameCanvas" class="FrameCanvas">
    </canvas>

    <!canvas width="1200" height="1200" id="canvasVideoEffect"><!/canvas>

    <!-- BEGIN OF A-FRAME SCENE -->
    <!-- All objects with the ID jeelizFaceFilterFollow will follow the head -->
    <a-scene>
      <a-assets>
        <a-asset-item
          id="mask"
          position="0 0 0"
          src="https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2Fout%20(2).glb?v=1613993807055"
          response-type="arraybuffer"
        >
        </a-asset-item>
      </a-assets>

      <a-plane
        id="jeelizFaceFilterFollow"
        position="0.5 1.25 -5"
        rotation="0 0 0"
        width="3"
        height="1.5"
        depth="1"
        color="#FFFFFF"
        animate-png
      >
        <!a-image src="https://cdn.glitch.com/3f35993f-6c9d-4b3e-a61d-17e740d68d9b%2Fmask%402x.png?v=1613996146160" position="0 -3.0 -4" scale="3.0 3.0 3.0">
        <!/a-image>

        <!script>entity.emit('animate-png', null, true);<!/script>
        <!a-entity
          position="0.5 -3 -5"
          scale="0.8 0.8 0.8"
          gltf-model="#mask"
          animation-mixer
        ><!/a-entity>
      </a-plane>

      <!a-plane
        position="0 0 -4"
        rotation="-90 0 0"
        width="4"
        height="4"
        color="#7BC8A4"
      ><!/a-plane>
      <a-sky color="#ECECEC"></a-sky>
    </a-scene>
    <!-- END OF A-FRAME SCENE -->
  </body>
</html>
